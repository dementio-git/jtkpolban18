<templates xml:space="preserve">
  <t t-name="jtk_logbook_analytics.LogbookDashboard" owl="1">
    <div class="logbook-dashboard-wrapper p-3">
      <h2>ðŸ“Š Dashboard Analitik Logbook</h2>

      <!-- Pilih Project -->
      <div class="mb-3">
        <label class="form-label">ðŸ“˜ Pilih Project:</label>
        <select class="form-select" t-att-value="state.selectedProjectId" t-on-change="onProjectChange">
          <option value="">-- Pilih Project --</option>
          <t t-foreach="state.projects" t-as="proj" t-key="proj.id">
            <option t-att-value="proj.id"><t t-esc="proj.name"/></option>
          </t>
        </select>
      </div>

      <!-- Pilih Minggu -->
      <t t-if="state.weeks.length">
        <div class="mb-3">
          <label class="form-label">ðŸ“… Pilih Minggu:</label>
          <select class="form-select" t-att-value="state.selectedWeekId" t-on-change="onWeekChange">
            <option value="">-- Pilih Minggu --</option>
            <t t-foreach="state.weeks" t-as="w" t-key="w.id">
              <option t-att-value="w.id"><t t-esc="w.name"/></option>
            </t>
          </select>
        </div>
      </t>

      <!-- Pesan jika belum pilih -->
      <t t-if="!state.selectedProjectId">
        <p class="text-muted">Silakan pilih project terlebih dahulu.</p>
      </t>
      <t t-if="state.selectedProjectId and !state.selectedWeekId">
        <p class="text-muted">Silakan pilih minggu untuk melihat grafik.</p>
      </t>

      <!-- Chart -->
      <div style="max-height: 500px; overflow-x: auto; overflow-y: auto; position: relative;">
      <canvas
          t-ref="barChartRef"
          style="min-width: 1000px; height: 400px; width: 100%; display: block;" />
      </div>


      <t t-if="state.selectedWeekId and state.data.length === 0">
        <p class="text-warning">Tidak ada data label untuk minggu ini.</p>
      </t>
    </div>
  </t>
</templates>
